!function(t){t.fn.spotlighter=function(s){var e=t.extend({json:!1,json_file:"",default_spotlight_width:150,showNumbers:!0},s);t(document).ready(function(){function s(){n=t("[data-splseq="+c+"]"),p=n.attr("data-splsize"),r=parseInt(n.attr("data-spladjustx")),d=parseInt(n.attr("data-spladjusty")),void 0==p&&(p=e.default_spotlight_width),1==e.showNumbers&&l.find(".spotlighter-seq").text(c),o.html(n.attr("data-spltext")),console.log("counter: "+c),console.log("data-spltext length: "+t("[data-spltext]").length),c==t("[data-spltext]").length&&(l.find(".spotlighter-next").removeClass("active"),l.find(".spotlighter-close").addClass("active")),c>1&&l.find(".spotlighter-prev").addClass("active"),i(n,p,r,d),c++}function i(s,e,i,a){var o=s.offset(),n=s.width(),p=(s.height(),o.left-t(document).scrollLeft()+n/2+0+i),r=o.top+a,d=parseInt(e),h=d/2*-1,c=l.find(".spotlighter-text"),g=c.height();t("html, body").animate({scrollTop:r-d},1200),l.find(".spotlight").css({left:p,top:r,marginLeft:h,marginTop:h,width:d,height:d});var f=parseInt(t(document).width()),u=t(document).height(),v=c.width(),y=c.height();f>=p+d+v?p+=d/2:p-=d/2+v,0>r-g/2?r=0:r-=g/2,r+y>u&&(r=u-y),c.css({left:p,top:r})}function a(){t.getJSON("data/spotlighter-data.json",function(s){h=s.length;for(var e=0;e<s.length;e++)t(document).find(s[e].tipLink).attr({"data-spltext":s[e].tipText,"data-splsize":s[e].tipSize,"data-splseq":s[e].tipSeq,"data-spladjustx":s[e].adjustX,"data-spladjusty":s[e].adjustY})})}var l,o,n,p,r,d,h,c=1;1==e.json&&""!=e.json_file&&a(),t(".startspotlighter").click(function(){return 0==t("#spotlighter-tip").length&&(t("body").append('<div id="spotlighter-tip"><div class="spotlighter-text"><div class="inner"><a class="spotlighter-seq top" href=""></a><a class="spotlighter-close top" href=""><span class="glyphicon glyphicon-remove"></span></a><div class="spotlighter-tip-text"></div><div class="spotlighter-actions"><a href="" class="spotlighter-prev"><span class="glyphicon glyphicon-menu-left"></span>Previous</a><a class="spotlighter-close" href="">Close <span class="glyphicon glyphicon-remove"></span></a><a class="spotlighter-next active" href="">Next <span class="glyphicon glyphicon-menu-right"></span></a></div></div></div><div class="spotlight"></div></div>'),l=t("#spotlighter-tip"),o=l.find(".spotlighter-tip-text")),l.addClass("active"),s(),!1}),t("body").on("click","#spotlighter-tip .spotlighter-next",function(){return s(),!1}),t("body").on("click","#spotlighter-tip .spotlighter-prev",function(){return l.find(".spotlighter-close").removeClass("active"),l.find(".spotlighter-next").addClass("active"),c-=2,s(),!1}),t("body").on("click",".spotlighter-close",function(){return l.removeClass("active").find(".spotlight").attr("style",""),t(".spotlighter-text").attr("style",""),l.find(".spotlighter-actions a").removeClass("active"),l.find(".spotlighter-actions .spotlighter-next").addClass("active"),c=1,!1})})}}(jQuery);
